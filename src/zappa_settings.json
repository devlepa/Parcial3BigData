{
    "dev": {
        "s3_bucket": "[TU_NOMBRE_DE_USUARIO]-zappa-deploy", // Bucket interno de Zappa para despliegues
        "app_function": "src.lambda_functions.download_headlines.download_and_upload_to_s3", // Función principal para el despliegue web (si aplica)
        "aws_region": "us-east-1", // O tu región
        "memory_size": 512, // Ajusta según la necesidad
        "timeout_seconds": 900, // Tiempo de espera para la Lambda (hasta 15 minutos, EMR puede tardar)
        "events": [
            {
                "function": "src.lambda_functions.download_headlines.download_and_upload_to_s3",
                "schedule": "cron(0 6 * * ? *)" // Todos los días a las 6 AM UTC
            },
            {
                "function": "src.lambda_functions.process_headlines.process_s3_html_event",
                "bucket": "[TU_NOMBRE_DE_USUARIO]-noticias-data", // El bucket de datos
                "event": "s3:ObjectCreated:*",
                "prefix": "headlines/raw/", // Solo para objetos en esta carpeta
                "suffix": ".html"          // Solo para archivos HTML
            },
            {
                "function": "src.lambda_functions.trigger_crawler.trigger_glue_crawler",
                "schedule": "cron(30 6 * * ? *)" // Todos los días a las 6:30 AM UTC (después de procesar HTML)
            },
            {
                "function": "src.lambda_functions.emr_orchestrator_lambda.launch_emr_and_run_spark_job",
                "schedule": "cron(0 8 * * ? *)" // Todos los días a las 8 AM UTC (después que Glue haya catalogado todo)
            }
        ],
        "environment_variables": {
            "S3_BUCKET": "[TU_NOMBRE_DE_USUARIO]-noticias-data",
            "GLUE_CRAWLER_NAME": "headlines_csv_crawler",
            "EMR_CLUSTER_NAME": "NewsMLCluster",
            "EMR_RELEASE_LABEL": "emr-6.15.0",
            "EMR_LOG_URI": "s3://[TU_NOMBRE_DE_USUARIO]-emr-logs/emr-logs/",
            "EC2_SUBNET_ID": "[TU_SUBNET_ID]",
            "EC2_KEY_PAIR": "[TU_EC2_KEY_PAIR_NAME]",
            "EMR_SERVICE_ROLE": "EMR_DefaultRole",
            "EC2_INSTANCE_PROFILE": "EMR_EC2_DefaultRole",
            "S3_SCRIPT_LOCATION": "s3://[TU_NOMBRE_DE_USUARIO]-glue-scripts/scripts/run_ml_pipeline.py",
            "BOOTSTRAP_ACTION_PATH": "s3://[TU_NOMBRE_DE_USUARIO]-glue-scripts/bootstrap/install_pyspark_deps.sh"
        },
        "manage_roles": true
    }
}